/*{$,Parser hint: .innerHTML okay}*/
/*{$,Parser hint: pure}*/

!function(t,i,s){"use strict";var e,n,o=t.event;e=o.special.debouncedresize={setup:function(){t(this).on("resize",e.handler)},teardown:function(){t(this).off("resize",e.handler)},handler:function(t,i){var s=this,a=arguments,r=function(){t.type="debouncedresize",o.dispatch.apply(s,a)};n&&clearTimeout(n),i?r():n=setTimeout(r,e.threshold)},threshold:150};var a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";t.fn.imagesLoaded=function(i){function s(){var s=t(d),e=t(c);o&&(c.length?o.reject(h,s,e):o.resolve(h)),t.isFunction(i)&&i.call(n,h,s,e)}function e(i,e){i.src!==a&&-1===t.inArray(i,l)&&(l.push(i),e?c.push(i):d.push(i),t.data(i,"imagesLoaded",{isBroken:e,src:i.src}),r&&o.notifyWith(t(i),[e,h,t(d),t(c)]),h.length===l.length&&(setTimeout(s),h.unbind(".imagesLoaded")))}var n=this,o=t.isFunction(t.Deferred)?t.Deferred():0,r=t.isFunction(o.notify),h=n.find("img").add(n.filter("img")),l=[],d=[],c=[];return t.isPlainObject(i)&&t.each(i,function(t,s){"callback"===t?i=s:o&&o[t](s)}),h.length?h.bind("load.imagesLoaded error.imagesLoaded",function(t){e(t.target,"error"===t.type)}).each(function(i,s){var n=s.src,o=t.data(s,"imagesLoaded");o&&o.src===n?e(s,o.isBroken):s.complete&&void 0!==s.naturalWidth?e(s,0===s.naturalWidth||0===s.naturalHeight):(s.readyState||s.complete)&&(s.src=a,s.src=n)}):s(),o?o.promise(n):n};var r=t(i),h=i.Modernizr;t.Elastislide=function(i,s){this.$el=t(s),this._init(i)},t.Elastislide.defaults={orientation:"horizontal",speed:500,easing:"ease-in-out",minItems:3,imgSizeItemSelector:"img",start:0,autoSlide:!1,delayTime:3e3,onClick:function(t,i,s){return!1},onReady:function(){return!1},onBeforeSlide:function(){return!1},onAfterSlide:function(){return!1}},t.Elastislide.prototype={_init:function(i){this.options=t.extend(!0,{},t.Elastislide.defaults,i);var s=this,e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};if(this.transEndEventName=e[h.prefixed("transition")],this.support=h.csstransitions&&h.csstransforms,this.current=this.options.start,this.isSliding=!1,this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,0===this.itemsCount)return!1;this._validate(),this.$items.detach(),this.$el.empty(),this.$el.append(this.$items),this.$el.wrap('<div class="elastislide-wrapper elastislide-loading elastislide-'+this.options.orientation+'"></div>'),this.hasTransition=!1,this.hasTransitionTimeout=setTimeout(function(){s._addTransition()},100),this.$el.imagesLoaded(function(){s.$el.show(),s._layout(),s._configure(),s.hasTransition?(s._removeTransition(),s._slideToItem(s.current),s.$el.on(s.transEndEventName,function(){s.$el.off(s.transEndEventName),s._setWrapperSize(),s._addTransition(),s._initEvents()})):(clearTimeout(s.hasTransitionTimeout),s._setWrapperSize(),s._initEvents(),s._slideToItem(s.current),setTimeout(function(){s._addTransition()},25)),s.options.onReady()})},_validate:function(){this.options.minItems instanceof Function&&(this._minItemsFn=this.options.minItems,this.options.minItems=this.options.minItems(document.documentElement.clientWidth)),this.options.speed<0&&(this.options.speed=500),(this.options.minItems<1||this.options.minItems>this.itemsCount)&&(this.options.minItems=1),(this.options.start<0||this.options.start>this.itemsCount-1)&&(this.options.start=0),"horizontal"!=this.options.orientation&&"vertical"!=this.options.orientation&&(this.options.orientation="horizontal")},_layout:function(){this.$el.wrap('<div class="elastislide-carousel"></div>'),this.$carousel=this.$el.parent(),this.$wrapper=this.$carousel.parent().removeClass("elastislide-loading");var t=this.$items.find(this.options.imgSizeItemSelector).first();this.imgSize={width:t.outerWidth(!0),height:t.outerHeight(!0)},this._setItemsSize(),"horizontal"===this.options.orientation?this.$el.css("max-height",this.imgSize.height):this.$el.css("height",this.options.minItems*this.imgSize.height),this._addControls()},_addTransition:function(){this.support&&this.$el.css("transition","all "+this.options.speed+"ms "+this.options.easing),this.hasTransition=!0},_removeTransition:function(){this.support&&this.$el.css("transition","all 0s"),this.hasTransition=!1},_addControls:function(){var i=this;this.$navigation=t('<nav><span class="elastislide-prev">Previous</span><span class="elastislide-next">Next</span></nav>').appendTo(this.$wrapper),this.$navPrev=this.$navigation.find("span.elastislide-prev").on("mousedown.elastislide",function(t){return i._slide("prev"),!1}),this.$navNext=this.$navigation.find("span.elastislide-next").on("mousedown.elastislide",function(t){return i._slide("next"),!1})},_setItemsSize:function(){var t="horizontal"===this.options.orientation?100*Math.floor(this.$carousel.width()/this.options.minItems)/this.$carousel.width():100;this.$items.css({width:t+"%","max-width":this.imgSize.width,"max-height":this.imgSize.height}),"vertical"===this.options.orientation&&this.$wrapper.css("max-width",this.imgSize.width+parseInt(this.$wrapper.css("padding-left"))+parseInt(this.$wrapper.css("padding-right")))},_setWrapperSize:function(){"vertical"===this.options.orientation&&this.$wrapper.css({height:this.options.minItems*this.imgSize.height+parseInt(this.$wrapper.css("padding-top"))+parseInt(this.$wrapper.css("padding-bottom"))})},_configure:function(){this.fitCount="horizontal"===this.options.orientation?this.$carousel.width()<this.options.minItems*this.imgSize.width?this.options.minItems:Math.floor(this.$carousel.width()/this.imgSize.width):this.$carousel.height()<this.options.minItems*this.imgSize.height?this.options.minItems:Math.floor(this.$carousel.height()/this.imgSize.height)},_initEvents:function(){var s=this;if(this.options.autoSlide){var e=0,n="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),o=this.itemsCount*n,a="horizontal"===this.options.orientation?this.$carousel.width():this.$carousel.height();i.setInterval(function(){o>e+a?(s._slide("next"),e+=a):(s._slideTo(0),e=0)},this.options.delayTime)}r.on("debouncedresize.elastislide",function(){s._minItemsFn&&(s.options.minItems=s._minItemsFn(document.documentElement.clientWidth)),s._setItemsSize(),s._configure(),s._slideToItem(s.current)}),this.$el.on(this.transEndEventName,function(){s._onEndTransition()}),"horizontal"===this.options.orientation?this.$el.on({swipeleft:function(){s._slide("next")},swiperight:function(){s._slide("prev")}}):this.$el.on({swipeup:function(){s._slide("next")},swipedown:function(){s._slide("prev")}}),this.$el.on("click.elastislide","li",function(i){var e=t(this);s.options.onClick(e,e.index(),i)})},_destroy:function(t){this.$el.off(this.transEndEventName).off("swipeleft swiperight swipeup swipedown .elastislide"),r.off(".elastislide"),this.$el.css({"max-height":"none",transition:"none"}).unwrap(this.$carousel).unwrap(this.$wrapper),this.$items.css({width:"auto","max-width":"none","max-height":"none"}),this.$navigation.remove(),this.$wrapper.remove(),t&&t.call()},_toggleControls:function(t,i){i?"next"===t?this.$navNext.show():this.$navPrev.show():"next"===t?this.$navNext.hide():this.$navPrev.hide()},_slide:function(i,s){if(this.isSliding)return!1;this.options.onBeforeSlide(),this.isSliding=!0;var e=this,n=this.translation||0,o="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),a=this.itemsCount*o,r="horizontal"===this.options.orientation?this.$carousel.width():this.$carousel.height();if(void 0===s){if((l=this.fitCount*o)<0)return!1;if("next"===i&&a-(Math.abs(n)+l)<r)l=a-(Math.abs(n)+r),this._toggleControls("next",!1),this._toggleControls("prev",!0);else if("prev"===i&&Math.abs(n)-l<0)l=Math.abs(n),this._toggleControls("next",!0),this._toggleControls("prev",!1);else{var h="next"===i?Math.abs(n)+Math.abs(l):Math.abs(n)-Math.abs(l);h>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1),h<a-r?this._toggleControls("next",!0):this._toggleControls("next",!1)}s="next"===i?n-l:n+l}else{var l=Math.abs(s);Math.max(a,r)-l<r&&(s=-(Math.max(a,r)-r)),l>0?this._toggleControls("prev",!0):this._toggleControls("prev",!1),Math.max(a,r)-r>l?this._toggleControls("next",!0):this._toggleControls("next",!1)}if(this.translation=s,n===s)return this._onEndTransition(),!1;if(this.support)"horizontal"===this.options.orientation?(this.$el.css("-webkit-transform","translateX("+s+"px)"),this.$el.css("-o-transform","translateX("+s+"px)"),this.$el.css("-ms-transform","translateX("+s+"px)"),this.$el.css("-moz-transform","translateX("+s+"px)"),this.$el.css("transform","translateX("+s+"px)")):(this.$el.css("-webkit-transform","translateY("+s+"px)"),this.$el.css("-o-transform","translateY("+s+"px)"),this.$el.css("-ms-transform","translateY("+s+"px)"),this.$el.css("-moz-transform","translateY("+s+"px)"),this.$el.css("transform","translateY("+s+"px)"));else{t.fn.applyStyle=this.hasTransition?t.fn.animate:t.fn.css;var d="horizontal"===this.options.orientation?{left:s}:{top:s};this.$el.stop().applyStyle(d,t.extend(!0,[],{duration:this.options.speed,complete:function(){e._onEndTransition()}}))}this.hasTransition||this._onEndTransition()},_onEndTransition:function(){this.isSliding=!1,this.options.onAfterSlide()},_slideTo:function(t){var t=t||this.current,i=Math.abs(this.translation)||0,s="horizontal"===this.options.orientation?this.$items.outerWidth(!0):this.$items.outerHeight(!0),e=i+this.$carousel.width(),n=Math.abs(t*s);(n+s>e||n<i)&&this._slideToItem(t)},_slideToItem:function(t){var i="horizontal"===this.options.orientation?t*this.$items.outerWidth(!0):t*this.$items.outerHeight(!0);this._slide("",-i)},add:function(t){var i=this,s=this.current,e=this.$items.eq(this.current);this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,this.current=e.index(),this._setItemsSize(),this._configure(),this._removeTransition(),s<this.current?this._slideToItem(this.current):this._slide("next",this.translation),setTimeout(function(){i._addTransition()},25),t&&t.call()},setCurrent:function(t,i){this.current=t,this._slideTo(),i&&i.call()},next:function(){this._slide("next")},previous:function(){this._slide("prev")},slideStart:function(){this._slideTo(0)},slideEnd:function(){this._slideTo(this.itemsCount-1)},destroy:function(t){this._destroy(t)}};var l=function(t){i.console&&i.console.error(t)};t.fn.elastislide=function(i){if("string"==typeof i){var s=Array.prototype.slice.call(arguments,1);this.each(function(){var e=t.data(this,"elastislide");e?t.isFunction(e[i])&&"_"!==i.charAt(0)?e[i].apply(e,s):l("no such method '"+i+"' for elastislide self"):l("cannot call methods on elastislide prior to initialization; attempted to call method '"+i+"'")})}else this.each(function(){var s=t.data(this,"elastislide");s?s._init():s=t.data(this,"elastislide",new t.Elastislide(i,this))});return self}}(jQuery,window);
